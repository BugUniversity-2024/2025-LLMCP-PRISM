# PRISM 项目团队分工与贡献说明

> **《LLM对话式编程》课程期末大作业**
>
> 项目名称：PRISM
>
> 团队人数：5 人

---

## 一、团队成员

| 成员代号 | 角色定位 | 主要职责 | 贡献占比 |
|---------|---------|---------|---------|
| **1547** | 产品负责人 + 前端主导 + 路演主讲 | 需求设计、前端架构、UI/UX、路演演讲 | **25%** |
| **1548** | 后端架构 + 数据库 | 后端实现、数据库设计、LLM集成 | **25%** |
| **1738** | PPT制作 | PPT设计与制作、路演材料、视觉呈现 | **17%** |
| **2275** | Demo演示 | Demo录制/现场演示、功能展示、答辩配合 | **17%** |
| **1543** | 审阅 + Prompt工程 | 代码审阅、Prompt设计、质量把控 | **16%** |

---

## 二、详细分工

### 2.1 1547（产品负责人 + 前端主导 + 路演主讲）

#### 主要贡献

**1. 需求设计与产品规划**
- 提出项目创意：Prompt 优化中间层
- 定义核心功能：智能生成、反馈迭代、版本管理
- 确定用户体验流程
- 制定技术选型方向

**2. 前端开发**
- **技术栈决策**：选择 Vue 3 + Tailwind CSS v4 + shadcn-vue
- **项目初始化**：搭建 Vite 项目，配置 pnpm
- **UI/UX 设计**：
  - 设计三栏布局（输入面板 + 图片查看 + Prompt 详情）
  - 主导 UI 优化迭代（3 轮重构，从"三大件"风格升级到现代化 UI）
  - 要求使用 Heroicons 替换 SVG
  - 提出动画和交互改进需求
- **前端调试**：本地运行前端服务器，测试用户交互流程

**3. 对话式编程协作**
- 主动提出需求和改进建议（97 轮对话中，主导 70+ 轮）
- 发现并报告 Bug（如反馈功能的 session_id 传递问题）
- 验证功能完成度，确保符合预期

**4. 项目管理**
- 划分开发阶段（7 个主要阶段）
- 协调前后端对接
- 确保项目按时完成

**5. 路演演讲**
- 7 分钟展示环节主讲
- 技术方案讲解
- 现场答辩回答

#### 代表性对话片段

> **需求讨论**：
> "主要是现在的模型比如 seedream 还有 gemini，他也是支持自然语言绘图的。我们的定位就是在用户和 gemini（或者别的）做一个中间层，在中间层使用如 GPT-4o 等模型去优化提示词。"

> **UI 优化**：
> "[附带截图] 目前的页面样式很有问题，感觉就和三大件一样。探索是什么问题导致的，然后再修复"

> **技术决策**：
> "你来吧，用 tailwindcss 还有 shadcn，我觉得比较好。注意 tailwindcss 是 v4 版本"

#### 贡献占比：**25%**

---

### 2.2 1548（后端架构 + 数据库）

#### 主要贡献

**1. 后端架构设计与实现**
- **技术选型**：FastAPI + SQLAlchemy + Alembic + uv
- **架构设计**：三层架构（API 路由层 → 业务逻辑层 → 数据访问层）
- **核心模块实现**：
  - `PromptEngine`：LLM 优化 Prompt 生成
  - `FeedbackEngine`：反馈分析 + Prompt Diff 生成
  - `ImageAdapter`：火山引擎 Seedream 图片生成
  - `SessionManager`：会话管理服务
- **API 接口实现**：7 个核心 RESTful 接口

**2. 数据库设计**
- 设计 2 张表（Sessions + Versions）
- 设计版本树结构（自关联外键）
- 创建 3 个索引优化查询性能
- 完成 2 次 Alembic 迁移

**3. LLM 集成**
- OpenAI SDK 集成（GPT-4o）
- 火山引擎 Seedream API 调用
- 3 次重试 + 降级 Mock 机制

**4. 技术咨询与问题解决**
- 提供技术方案建议（如建议使用 Alembic 管理数据库迁移）
- 调试 API 对接问题（如火山引擎 API 调用格式）
- 修复 Bug（如反馈功能的 422 错误）

#### 代表性工作成果

- **后端代码**：约 1500 行 Python 代码
- **数据库设计**：2 张表 + 3 个索引 + 2 次迁移
- **API 文档**：FastAPI 自动文档（/docs）

#### 贡献占比：**25%**

---

### 2.3 1738（PPT制作）

#### 主要贡献

**1. PPT 路演材料设计与制作**
- 10 分钟路演 PPT 整体设计
- 幻灯片视觉风格设计与排版
- 确保 PPT 美观、专业

**2. 技术可视化**
- 技术架构图绘制
- 系统流程图制作
- LLM 调用链路图设计

**3. 路演材料优化**
- 演示动画与过渡效果
- 内容排版与视觉层次
- 路演材料多轮优化与美化

#### 贡献占比：**17%**

---

### 2.4 2275（Demo演示）

#### 主要贡献

**1. Demo 准备**
- Demo 录屏准备与录制
- 演示脚本设计
- 备用演示方案准备

**2. 现场演示**
- 现场功能演示操作
- 系统核心功能展示
- 演示流程把控

**3. 答辩配合**
- 答辩环节配合回答
- 技术问题解答协助
- 功能细节补充说明

#### 贡献占比：**17%**

---

### 2.5 1543（审阅 + Prompt工程）

#### 主要贡献

**1. Prompt 工程**
- 设计生成阶段 System Prompt（`generation.txt`）
  - 定义 9 字段结构化 Schema
  - 编写 Few-shot 示例（橘猫、科幻城市）
  - 针对火山 Seedream 模型优化
- 设计反馈阶段 System Prompt（`feedback.txt`）
  - 定义 Prompt Diff 操作类型（add/remove/adjust/replace）
  - 设计反馈映射规则
  - 实现最小修改原则
- 创新 Prompt Diff 机制设计

**2. 代码审阅与质量把控**
- 代码审阅与反馈
- 技术方案评审
- 质量标准把控

**3. 文档审阅**
- 技术文档审阅与校对
- 项目报告内容审核
- 文档质量把控

#### 代表性工作成果

- **创新设计**：Prompt Diff 机制（类似 Git Diff）
- **Prompt 模板**：generation.txt (97行) + feedback.txt (114行)
- **结构化 Schema**：9 字段的 Prompt Schema

#### 贡献占比：**16%**

---

## 三、协作方式

### 3.1 对话式编程协作

本项目全程采用 **对话式编程（Conversational Programming）** 方法，使用 Claude Code（基于 Claude Sonnet 4.5）进行协作开发。

**协作模式**：
- **轮次**：97 轮对话
- **周期**：约 2 周
- **分工**：1547 提出需求和改进建议，1548 实现后端代码，1543 设计 Prompt 并审阅

**对话记录**：
- 原始对话：`docs/filtered_prism_conversations.md`（97 轮）
- 格式化对话：`docs/formatted_conversations.md`（按阶段分组）

### 3.2 典型协作流程

**示例 1：UI 优化迭代**
```
1547: [截图] 目前的页面样式很有问题，探索是什么问题导致的
    ↓
1548: 分析代码，发现布局和样式问题
    ↓
1547: 提升视觉层次、动画和交互、细节优化、更好的布局
    ↓
1548: 重构 UI 组件，添加渐变背景、动画效果、毛玻璃等
    ↓
1547: 我感觉十分不错的啊～很棒！
```

**示例 2：数据库设计**
```
1547: 然后看一下我们的前后端，之前生成的图片和历史会被刷新后删除
    ↓
1548: 建议实现数据持久化，使用 PostgreSQL
    ↓
1547: 我建议不用 postgresql，暂时先使用 sqlite
    ↓
1548: 调整方案，设计 SQLite + Sessions/Versions 两张表
    ↓
1547: 没事，我验证好了，可以使用
```

**示例 3：Bug 修复**
```
1547: 调查一下一个 bug，422 Unprocessable Entity
    ↓
1548: 分析日志，发现 session_id 传递问题
    ↓
1547: 前端 Request URL 是 /sessions/undefined/feedback
    ↓
1548: 修复前端代码，正确获取 session_id
    ↓
测试通过 ✅
```

---

## 四、成果总结

### 4.1 代码贡献

| 模块 | 主要负责人 | 行数估算 | 文件数 |
|-----|-----------|---------|-------|
| **前端** | 1547（主导） | ~2000 行 | 15 个文件 |
| **后端** | 1548（主导） | ~1500 行 | 20 个文件 |
| **Prompt 模板** | 1543（主导） | ~200 行 | 2 个文件 |
| **文档** | 全员协作 | ~5000 行 | 7 个文件 |
| **PPT** | 1738（主导） | - | 1 个文件 |
| **配置** | 1548（主导） | ~500 行 | 10 个文件 |
| **总计** | - | ~9000 行 | 55 个文件 |

### 4.2 关键里程碑

| 里程碑 | 完成时间 | 主要负责人 |
|--------|---------|-----------|
| 项目规划 | 第 1 周 | 1547 |
| 前端初始化 | 第 1 周 | 1547 |
| 后端初始化 | 第 1 周 | 1548 |
| Prompt 设计 | 第 1 周 | 1543 |
| UI 优化完成 | 第 2 周 | 1547 |
| 后端 API 对接 | 第 2 周 | 1548 |
| 火山引擎集成 | 第 2 周 | 1548 |
| 项目完成 | 第 2 周 | 全员协作 |
| 文档补充 | 第 3 周 | 全员协作 |
| PPT 制作 | 第 3 周 | 1738 |
| Demo 准备 | 第 3 周 | 2275 |

---

## 五、技术亮点归属

| 技术亮点 | 主要贡献者 | 说明 |
|---------|-----------|------|
| **Prompt Diff 机制** | 1543 | 创新设计，类似 Git Diff 的精确修改方案 |
| **结构化 Schema 设计** | 1543 | 9 字段的 Prompt Schema，支持字段级控制 |
| **Prompt 预览机制** | 1547 | 提出需求：先预览 Prompt 再生成图片（成本优化） |
| **版本树设计** | 1548 | 自关联外键实现版本树，支持分支探索 |
| **现代化 UI 设计** | 1547 | 三栏布局、渐变背景、动画效果 |
| **双模式运行** | 1548 | 支持 Mock/真实 API 切换，便于开发调试 |
| **PPT 视觉设计** | 1738 | 专业路演材料设计与制作 |
| **Demo 演示流程** | 2275 | 演示脚本设计与现场展示 |

---

## 六、总结与展望

### 6.1 团队优势

1. **分工明确**：5 人团队各司其职，前后端分离 + 展示分工清晰
2. **互补性强**：1547 擅长产品和前端，1548 擅长后端和数据库，1543 擅长 Prompt 设计
3. **沟通高效**：对话式协作，问题响应快
4. **展示专业**：1738 负责 PPT 设计，2275 负责 Demo 演示，确保路演质量

### 6.2 对话式编程的价值

通过本项目实践，充分验证了对话式编程的优势：
- **需求澄清**：通过对话快速理解并迭代需求
- **知识传递**：AI 主动建议最佳实践，提升开发效率
- **文档自动化**：对话记录本身就是开发过程文档

### 6.3 未来改进方向

如果继续完善项目，建议分工：
- **1547**：产品优化、移动端适配、用户体验改进
- **1548**：性能优化、多模型支持、云端部署
- **1738**：更多可视化材料、用户手册设计
- **2275**：视频教程、使用演示
- **1543**：Prompt 优化、多语言支持

---

**文档编写日期**：2026-01-04

**审核**：1547、1548、1738、2275、1543 共同确认
