# PRISM 项目团队分工与贡献说明

> **《LLM对话式编程》课程期末大作业**
>
> 项目名称：PRISM
>
> 团队人数：2 人

---

## 一、团队成员

| 成员代号 | 角色定位 | 主要职责 |
|---------|---------|---------|
| **AptS:1547** | 产品负责人 + 前端开发 | 需求设计、前端实现、UI/UX、产品决策 |
| **AptS:1548** | AI 编程助手 + 后端开发 | 后端实现、Prompt 工程、文档编写、技术咨询 |

---

## 二、详细分工

### 2.1 AptS:1547（产品负责人 + 前端开发）

#### 主要贡献

**1. 需求设计与产品规划（20%）**
- 提出项目创意：Prompt 优化中间层
- 定义核心功能：智能生成、反馈迭代、版本管理
- 确定用户体验流程
- 制定技术选型方向

**2. 前端开发（35%）**
- **技术栈决策**：选择 Vue 3 + Tailwind CSS v4 + shadcn-vue
- **项目初始化**：搭建 Vite 项目，配置 pnpm
- **UI/UX 设计**：
  - 设计三栏布局（输入面板 + 图片查看 + Prompt 详情）
  - 主导 UI 优化迭代（3 轮重构，从"三大件"风格升级到现代化 UI）
  - 要求使用 Heroicons 替换 SVG
  - 提出动画和交互改进需求
- **组件实现**：部分协作完成 10 个 Vue 组件
- **前端调试**：本地运行前端服务器，测试用户交互流程

**3. 对话式编程协作（15%）**
- 主动提出需求和改进建议（97 轮对话中，主导 70+ 轮）
- 发现并报告 Bug（如反馈功能的 session_id 传递问题）
- 验证功能完成度，确保符合预期

**4. 项目管理（10%）**
- 划分开发阶段（7 个主要阶段）
- 协调前后端对接
- 确保项目按时完成

#### 代表性对话片段

> **需求讨论**：
> "主要是现在的模型比如 seedream 还有 gemini，他也是支持自然语言绘图的。我们的定位就是在用户和 gemini（或者别的）做一个中间层，在中间层使用如 GPT-4o 等模型去优化提示词。"

> **UI 优化**：
> "[附带截图] 目前的页面样式很有问题，感觉就和三大件一样。探索是什么问题导致的，然后再修复"

> **技术决策**：
> "你来吧，用 tailwindcss 还有 shadcn，我觉得比较好。注意 tailwindcss 是 v4 版本"

> **数据库选型**：
> "我建议不用 postgresql，暂时先使用 sqlite"

#### 贡献占比：**45%**

---

### 2.2 AptS:1548（AI 编程助手 + 后端开发）

#### 主要贡献

**1. 后端架构设计与实现（30%）**
- **技术选型**：FastAPI + SQLAlchemy + Alembic + uv
- **架构设计**：三层架构（API 路由层 → 业务逻辑层 → 数据访问层）
- **数据库设计**：
  - 设计 2 张表（Sessions + Versions）
  - 设计版本树结构（自关联外键）
  - 创建 3 个索引优化查询性能
  - 完成 2 次 Alembic 迁移
- **核心模块实现**：
  - `PromptEngine`：LLM 优化 Prompt 生成
  - `FeedbackEngine`：反馈分析 + Prompt Diff 生成
  - `ImageAdapter`：火山引擎 Seedream 图片生成
  - `SessionManager`：会话管理服务
- **API 接口实现**：7 个核心 RESTful 接口

**2. Prompt 工程（20%）**
- 设计生成阶段 System Prompt（`generation.txt`）
  - 定义 9 字段结构化 Schema
  - 编写 Few-shot 示例（橘猫、科幻城市）
  - 针对火山 Seedream 模型优化
- 设计反馈阶段 System Prompt（`feedback.txt`）
  - 定义 Prompt Diff 操作类型（add/remove/adjust/replace）
  - 设计反馈映射规则
  - 实现最小修改原则
- 创新 Prompt Diff 机制设计

**3. 前端辅助开发（10%）**
- 协助完成 10 个 Vue 组件的实现
- 编写前端 API 调用逻辑（`frontend/src/api/`）
- 实现状态管理（Pinia stores）
- 配置 Tailwind CSS v4 + shadcn-vue

**4. 技术文档编写（15%）**
- 编写项目方案文档（`docs/项目方案.md`，1130 行，36KB）
- 编写 API 文档（`docs/API文档.md`，902 行，20KB）
- 编写项目报告（`docs/项目报告.md`）
- 编写数据库设计文档（`docs/数据库设计.md`）
- 整理对话记录（`docs/formatted_conversations.md`）
- 编写路演建议文档（`docs/roadshow_conversation_highlights.md`）

**5. 技术咨询与问题解决（10%）**
- 提供技术方案建议（如建议使用 Alembic 管理数据库迁移）
- 调试 API 对接问题（如火山引擎 API 调用格式）
- 修复 Bug（如反馈功能的 422 错误）
- 提供最佳实践指导

#### 代表性工作成果

- **创新设计**：Prompt Diff 机制（类似 Git Diff）
- **技术文档**：2032 行详细技术文档（项目方案 + API 文档）
- **代码质量**：完整的类型注解、错误处理、数据验证
- **工程规范**：Alembic 迁移、.env.example 配置模板、FastAPI 自动文档

#### 贡献占比：**55%**

---

## 三、协作方式

### 3.1 对话式编程协作

本项目全程采用 **对话式编程（Conversational Programming）** 方法，使用 Claude Code（基于 Claude Sonnet 4.5）进行协作开发。

**协作模式**：
- **轮次**：97 轮对话
- **周期**：约 2 周
- **分工**：AptS:1547 提出需求和改进建议，AptS:1548 实现代码并提供技术咨询

**对话记录**：
- 原始对话：`docs/filtered_prism_conversations.md`（97 轮）
- 格式化对话：`docs/formatted_conversations.md`（按阶段分组）

### 3.2 典型协作流程

**示例 1：UI 优化迭代**
```
AptS:1547: [截图] 目前的页面样式很有问题，探索是什么问题导致的
    ↓
AptS:1548: 分析代码，发现布局和样式问题
    ↓
AptS:1547: 提升视觉层次、动画和交互、细节优化、更好的布局
    ↓
AptS:1548: 重构 UI 组件，添加渐变背景、动画效果、毛玻璃等
    ↓
AptS:1547: 我感觉十分不错的啊～很棒！
```

**示例 2：数据库设计**
```
AptS:1547: 然后看一下我们的前后端，之前生成的图片和历史会被刷新后删除
    ↓
AptS:1548: 建议实现数据持久化，使用 PostgreSQL
    ↓
AptS:1547: 我建议不用 postgresql，暂时先使用 sqlite
    ↓
AptS:1548: 调整方案，设计 SQLite + Sessions/Versions 两张表
    ↓
AptS:1547: 没事，我验证好了，可以使用
```

**示例 3：Bug 修复**
```
AptS:1547: 调查一下一个 bug，422 Unprocessable Entity
    ↓
AptS:1548: 分析日志，发现 session_id 传递问题
    ↓
AptS:1547: 前端 Request URL 是 /sessions/undefined/feedback
    ↓
AptS:1548: 修复前端代码，正确获取 session_id
    ↓
测试通过 ✅
```

---

## 四、成果总结

### 4.1 代码贡献

| 模块 | 主要负责人 | 行数估算 | 文件数 |
|-----|-----------|---------|-------|
| **前端** | AptS:1547（主导）+ AptS:1548（协作） | ~2000 行 | 15 个文件 |
| **后端** | AptS:1548（主导） | ~1500 行 | 20 个文件 |
| **文档** | AptS:1548（主导） | ~5000 行 | 7 个文件 |
| **配置** | AptS:1548（主导） | ~500 行 | 10 个文件 |
| **总计** | - | ~9000 行 | 52 个文件 |

### 4.2 关键里程碑

| 里程碑 | 完成时间 | 主要负责人 |
|--------|---------|-----------|
| 项目规划 | 第 1 周 | AptS:1547 |
| 前端初始化 | 第 1 周 | AptS:1547 |
| 后端初始化 | 第 1 周 | AptS:1548 |
| UI 优化完成 | 第 2 周 | AptS:1547 + AptS:1548 |
| 后端 API 对接 | 第 2 周 | AptS:1548 |
| 火山引擎集成 | 第 2 周 | AptS:1548 |
| 项目完成 | 第 2 周 | 双方协作 |
| 文档补充 | 第 3 周 | AptS:1548 |

---

## 五、技术亮点归属

| 技术亮点 | 主要贡献者 | 说明 |
|---------|-----------|------|
| **Prompt Diff 机制** | AptS:1548 | 创新设计，类似 Git Diff 的精确修改方案 |
| **结构化 Schema 设计** | AptS:1548 | 9 字段的 Prompt Schema，支持字段级控制 |
| **Prompt 预览机制** | AptS:1547 | 提出需求：先预览 Prompt 再生成图片（成本优化） |
| **版本树设计** | AptS:1548 | 自关联外键实现版本树，支持分支探索 |
| **现代化 UI 设计** | AptS:1547 | 三栏布局、渐变背景、动画效果 |
| **双模式运行** | AptS:1548 | 支持 Mock/真实 API 切换，便于开发调试 |

---

## 六、总结与展望

### 6.1 团队优势

1. **互补性强**：AptS:1547 擅长产品和前端，AptS:1548 擅长后端和文档
2. **沟通高效**：对话式协作，问题响应快（平均 < 5 分钟）
3. **质量保障**：双重审核，AptS:1547 验证功能，AptS:1548 保证代码质量

### 6.2 对话式编程的价值

通过本项目实践，充分验证了对话式编程的优势：
- **需求澄清**：通过对话快速理解并迭代需求
- **知识传递**：AI 主动建议最佳实践，提升开发效率
- **文档自动化**：对话记录本身就是开发过程文档

### 6.3 未来改进方向

如果继续完善项目，建议分工：
- **AptS:1547**：产品优化、移动端适配、用户体验改进
- **AptS:1548**：性能优化、多模型支持、云端部署

---

**文档编写日期**：2026-01-03

**审核**：AptS:1547、AptS:1548 共同确认
